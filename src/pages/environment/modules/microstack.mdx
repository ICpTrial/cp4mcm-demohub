---
title: Installing Openstack instance as managed environment for CloudForms
description: IBM Cloud Pak for MCM additional modules - Openstack as the managed VM platform
---

## Preparing the Virtual Server Instance

1. In order to create an Openstack instance in IBM Cloud following this procedure you need to setup a VPC and create a Gen2 virtual server instance (VSI) with Ubuntu 18.04. For the testing purpose I have used `bx2-8x32` profile. Instance needs to be assigned with the floating IP to provide connectivity to the Internet.

2. Connect to the VSI. Update the Ubuntu

   ```bash
   apt-get update
   apt-get upgarde -y
   ```

   In case of warning over the `sshd_config` file you can either keep the local version or use the maintainer package.

## Installing the Openstack

3. Install the Microstack

   ```bash
   snap install microstack --classic --beta
   ```

   The installation should take less then 5 minutes (depends on the network speed) and if all works as expected will finish with the following message:

   ```bash
   2020-06-03T08:03:07Z INFO Waiting for restart...
   microstack (beta) stein from Canonicalâœ“ installed
   ```

4. Initialize the Microstack
   MicroStack needs to be initialised, so that networks and databases get configured. To do this, run:

   ```bash
   microstack.init --auto
   ```

   Initialization process may take 10-15 minutes.

5. Create alias for Openstack CLI

   ```bash
   alias os="microstack.openstack"
   ```

## Exposing the Openstack endpoints on the external IP

By default Microstack creates intenal network 10.20.20.1/24 and this network is used for exposing API endpoints. You need to expose public endpoints in VSI external IP, so the CloudForms can connect to the Openstack services.

6. Edit the default security group in your VPC, adding incoming rule for port 5000
7. Change the default admin password. (Default is `keystone`).



openstack endpoint create --region microstack volumev2 public http://10.20.20.1:8776/v2/%\(project_id\)s
openstack endpoint create --region microstack volumev2 internal http://10.20.20.1:8776/v2/%\(project_id\)s
openstack endpoint create --region microstack volumev2 admin http://10.20.20.1:8776/v2/%\(project_id\)s
openstack endpoint create --region microstack volumev3 public http://10.20.20.1:8776/v3/%\(project_id\)s
openstack endpoint create --region microstack volumev3 internal http://10.20.20.1:8776/v3/%\(project_id\)s
openstack endpoint create --region microstack volumev3 admin http://10.20.20.1:8776/v3/%\(project_id\)s